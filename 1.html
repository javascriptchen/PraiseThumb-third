<script>
  function hackFunction(before, func, after) {
    return function (...args) {
      console.log(this);
      before && before.apply(this, args);
      var ret = func.apply(this, args);
      console.log("ret");
      console.log(ret);
      after && after.apply(this, [ret].concat(args));
      return ret;
    }
  }

  var now = hackFunction(
    function (...args) {
      console.log("before");
      console.log("args.length = ", args.length);
      args.forEach(item => console.log(item))
      console.log("before");
    },
    function (...args) {
      console.log("now");
      console.log("args.length = ", args.length);
      args.forEach(item => console.log(item))
      console.log("now");
    },
    function (...args) {
      console.log("end");
      console.log("args.length = ", args.length);
      args.forEach(item => console.log(item))
      console.log("end");
    }
  )

  now('a', 'bb', 'ada', 'aaaa')
</script>